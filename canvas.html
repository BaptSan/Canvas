<!DOCTYPE html>
<html>
<head>
	<title>Canvas Test !</title>
<style>

</style>

</head>
<body>
<script
 src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>

<canvas id="myCanvas" width="600" height="400"
style="border:1px solid #000000;">
</canvas>
<script>
	var dernierX = 0;
	var dernierY = 0;
	var c = document.getElementById('myCanvas');
	c.width = $('#myCanvas').width();
	c.height = $('#myCanvas').height();

$(window).resize(function () {
	var c = document.getElementById('myCanvas');
	c.width = $('#myCanvas').width();
	c.height = $('#myCanvas').height();
});
myMouse = false;

/*Fonction de dessin*/

$('#myCanvas').mousemove(function() {
		if (myMouse === true) {
	var c = document.getElementById('myCanvas');
	var ctx = c.getContext("2d");
	ctx.moveTo(dernierX, dernierY);
	ctx.lineTo(event.clientX, event.clientY);
	ctx.strokeStyle = 'red';
	ctx.lineWidth = 5;
	ctx.stroke();
	dernierX = event.clientX; 
	dernierY = event.clientY;
	path.push([event.clientX, event.clientY]);
}})

/*fin de fonction de dessin*/
function afficherLesChemins(mesChemins){
console.log(mesChemins[1].path);
}
/*fonction de dessin au niveau du click*/

$('#myCanvas').mousedown(function() {
	path = [];
	myMouse = true;
	dernierX = event.clientX; 
	dernierY = event.clientY;
});
$('#myCanvas').mouseup(function() {
	myMouse = false;
	var data = {
	path: path,
	strokeColor:'#1807b2',
	lineWidth:5
	}
	$.ajax({
		url : 'http://draw.api.niamor.com/paths/add',
		method : 'POST',
		data: data,
		});
	$.ajax({
		url: 'http://draw.api.niamor.com/paths',
		method: 'post',
		data:{
			lastId: 0,
		}
	}).done(afficherLesChemins);
} 
);


/*fin de fonction de dessin au niveau du click*/




</script>

</body>
</html>
